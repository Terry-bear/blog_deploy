---
title: "æ·±å…¥ç†è§£TypeScript 1"
date: 2019-01-22T11:25:36+08:00
lastmod: 2019-01-22T11:25:36+08:00
draft: false
keywords: ["javascript", "typescript"]
description: ""
tags: ["javascript", "typescript"]
categories: ["code"]
author: "Terryzh"

postMetaInFooter: false

---

<!--more-->

è¿™ä¸€ç« ä¸»è¦æ€»ç»“TypeScriptçš„ç”¨æ³•å’Œé¡¹ç›®å¸¸ç”¨é…ç½®

## ç¼–è¯‘ä¸Šä¸‹æ–‡

ç”¨æ¥ç»™æ–‡ä»¶åˆ†ç»„ï¼Œå‘Šè¯‰ TypeScript å“ªäº›æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ï¼Œå“ªäº›æ˜¯æ— æ•ˆçš„ã€‚å®šä¹‰è¿™ç§é€»è¾‘åˆ†ç»„ï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨ `tsconfig.json` æ–‡ä»¶ã€‚

**å¸¸ç”¨é…ç½®ä¸€è§ˆ**

```json
    {
      "compilerOptions": {

        /* åŸºæœ¬é€‰é¡¹ */
        "target": "es5",                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'
        "module": "commonjs",                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'
        "lib": [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶
        "allowJs": true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶
        "checkJs": true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯
        "jsx": "preserve",                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'
        "declaration": true,                   // ç”Ÿæˆç›¸åº”çš„ '.d.ts' æ–‡ä»¶
        "sourceMap": true,                     // ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶
        "outFile": "./",                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶
        "outDir": "./",                        // æŒ‡å®šè¾“å‡ºç›®å½•
        "rootDir": "./",                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.
        "removeComments": true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š
        "noEmit": true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶
        "importHelpers": true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°
        "isolatedModules": true,               // å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰.

        /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */
        "strict": true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹
        "noImplicitAny": true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™
        "strictNullChecks": true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥
        "noImplicitThis": true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯
        "alwaysStrict": true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ 'use strict'

        /* é¢å¤–çš„æ£€æŸ¥ */
        "noUnusedLocals": true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
        "noUnusedParameters": true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
        "noImplicitReturns": true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
        "noFallthroughCasesInSwitch": true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰

        /* æ¨¡å—è§£æé€‰é¡¹ */
        "moduleResolution": "node",            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)
        "baseUrl": "./",                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•
        "paths": {},                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨
        "rootDirs": [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹
        "typeRoots": [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨
        "types": [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨
        "allowSyntheticDefaultImports": true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚

        /* Source Map Options */
        "sourceRoot": "./",                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®
        "mapRoot": "./",                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®
        "inlineSourceMap": true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶
        "inlineSources": true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§

        /* å…¶ä»–é€‰é¡¹ */
        "experimentalDecorators": true,        // å¯ç”¨è£…é¥°å™¨
        "emitDecoratorMetadata": true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ
      }
    }
```

## **TypeScript ç¼–è¯‘**

å¥½çš„ IDE æ”¯æŒå¯¹ TypeScript çš„å³æ—¶ç¼–è¯‘ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨ä½¿ç”¨Â `tsconfig.json`Â æ—¶ä»å‘½ä»¤è¡Œæ‰‹åŠ¨è¿è¡Œ TypeScript ç¼–è¯‘å™¨ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š

- è¿è¡Œ tscï¼Œå®ƒä¼šåœ¨å½“å‰ç›®å½•æˆ–è€…æ˜¯çˆ¶çº§ç›®å½•å¯»æ‰¾Â `tsconfig.json`Â æ–‡ä»¶ã€‚
- è¿è¡ŒÂ `tsc -p ./path-to-project-directory`Â ã€‚å½“ç„¶ï¼Œè¿™ä¸ªè·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºå½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚

ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨Â `tsc -w`Â æ¥å¯ç”¨ TypeScript ç¼–è¯‘å™¨çš„è§‚æµ‹æ¨¡å¼ï¼Œåœ¨æ£€æµ‹åˆ°æ–‡ä»¶æ”¹åŠ¨ä¹‹åï¼Œå®ƒå°†é‡æ–°ç¼–è¯‘ã€‚

# å£°æ˜ç©ºé—´

åœ¨ TypeScript é‡Œå­˜åœ¨ä¸¤ç§å£°æ˜ç©ºé—´ï¼š**ç±»å‹å£°æ˜ç©ºé—´**ä¸**å˜é‡å£°æ˜ç©ºé—´**ã€‚æˆ‘å°†ä¼šåœ¨ä¸‹æ–‡ä¸­å’Œå¤§å®¶è®¨è®ºè¿™ä¸¤ä¸ªæ¦‚å¿µã€‚

## **ç±»å‹å£°æ˜ç©ºé—´**

ç±»å‹å£°æ˜ç©ºé—´åŒ…å«ç”¨æ¥å½“åšç±»å‹æ³¨è§£çš„å†…å®¹ï¼Œä¾‹å¦‚ä»¥ä¸‹çš„ä¸€äº›ç±»å‹å£°æ˜ï¼š

```typescript
    class Foo {};
    interface Bar {};
    type Bas = {};
```

ä½ å¯ä»¥å°†Â `Foo`,Â `Bar`,Â `Bas`Â åšä¸ºç±»å‹æ³¨è§£ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š

```typescript
    let foo: Foo;
    let bar: Bar;
    let bas: Bas;
```

æ³¨æ„ï¼Œå°½ç®¡ä½ å®šä¹‰äº†Â `interface Bar`ï¼Œä½ å¹¶ä¸èƒ½å¤Ÿå°†å®ƒåšä¸ºä¸€ä¸ªå˜é‡ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å®šä¹‰åœ¨å˜é‡å£°æ˜ç©ºé—´ä¸­ï¼š

```typescript
    interface Bar {}
    const bar = Bar; // Error: "cannot find name 'Bar'"
```

æç¤ºÂ `cannot find name 'Bar'`Â çš„åŸå› æ˜¯åç§°Â `Bar`Â å¹¶æœªå®šä¹‰åœ¨å˜é‡å£°æ˜ç©ºé—´ã€‚è¿™å°†å¸¦é¢†æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€ä¸ªä¸»é¢˜ "å˜é‡å£°æ˜ç©ºé—´"ã€‚

## **å˜é‡å£°æ˜ç©ºé—´**

å˜é‡å£°æ˜ç©ºé—´åŒ…å«å¯ç”¨ä½œå˜é‡çš„å†…å®¹ï¼Œåœ¨ä¸Šæ–‡ä¸­Â `Class Foo`Â æä¾›äº†ä¸€ä¸ªç±»å‹Â `Foo`Â åˆ°ç±»å‹å£°æ˜ç©ºé—´ï¼Œæ­¤å¤–å®ƒåŒæ ·æä¾›äº†ä¸€ä¸ªå˜é‡Â `Foo`Â åˆ°å˜é‡å£°æ˜ç©ºé—´ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```typescript
    class Foo {}
    const someVar = Foo;
    const someOtherVar = 123;
```

è¿™å¾ˆæ£’ï¼Œå°¤å…¶æ˜¯å½“ä½ æƒ³æŠŠä¸€ä¸ªç±»æ¥å½“åšå˜é‡ä¼ é€’æ—¶ã€‚

> **WARNING**

> æˆ‘ä»¬å¹¶ä¸èƒ½ä½¿ç”¨ä¸€äº›åƒÂ `interface`Â å®šä¹‰çš„å†…å®¹ï¼Œæ¥å½“åšå˜é‡ä½¿ç”¨ã€‚

ä¸æ­¤ç›¸ä¼¼ï¼Œä¸€äº›åƒä½ ç”¨Â `var`Â å£°æ˜çš„å˜é‡ï¼Œä¹Ÿä»…èƒ½åœ¨å˜é‡å£°æ˜ç©ºé—´ä½¿ç”¨ï¼Œä¸èƒ½ç”¨ä½œç±»å‹æ³¨è§£ã€‚

```typescript
    const foo = 123;
    let bar: foo; // ERROR: "cannot find name 'foo'"
```

æç¤ºÂ `cannot find name`Â çš„åŸå› æ˜¯ï¼Œåç§°Â `foo`Â æ²¡æœ‰å®šä¹‰åœ¨ç±»å‹å£°æ˜ç©ºé—´é‡Œã€‚

# **æ¨¡å—**

## **å…¨å±€æ¨¡å—**

é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ å¼€å§‹åœ¨ä¸€ä¸ªæ–°çš„ TypeScript æ–‡ä»¶ä¸­å†™ä¸‹ä»£ç æ—¶ï¼Œå®ƒå¤„äºå…¨å±€å‘½åç©ºé—´ä¸­ã€‚å¦‚åœ¨Â `foo.ts`Â é‡Œçš„ä»¥ä¸‹ä»£ç ï¼š

```typescript
    const foo = 123;
```

å¦‚æœä½ åœ¨ç›¸åŒçš„é¡¹ç›®é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶Â `bar.ts`ï¼ŒTypeScript ç±»å‹ç³»ç»Ÿå°†ä¼šå…è®¸ä½ ä½¿ç”¨å˜é‡Â `foo`ï¼Œå°±å¥½åƒå®ƒåœ¨å…¨å±€å¯ç”¨ä¸€æ ·ï¼š

```typescript
    const bar = foo; // allowed
```

æ¯‹åº¸ç½®ç–‘ï¼Œä½¿ç”¨å…¨å±€å˜é‡ç©ºé—´æ˜¯å±é™©çš„ï¼Œå› ä¸ºå®ƒä¼šä¸æ–‡ä»¶å†…çš„ä»£ç å‘½åå†²çªã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ä¸‹æ–‡ä¸­å°†è¦æåˆ°çš„æ–‡ä»¶æ¨¡å—ã€‚

## **æ–‡ä»¶æ¨¡å—**

å®ƒä¹Ÿè¢«ç§°ä¸ºå¤–éƒ¨æ¨¡å—ã€‚å¦‚æœåœ¨ä½ çš„ TypeScript æ–‡ä»¶çš„æ ¹çº§åˆ«ä½ç½®å«æœ‰Â `import`Â æˆ–è€…Â `export`ï¼Œå®ƒä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„ä½œç”¨åŸŸã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸Šæ–‡Â `foo.ts`Â æ”¹æˆå¦‚ä¸‹æ–¹å¼ï¼ˆæ³¨æ„Â `export`Â ç”¨æ³•ï¼‰ï¼š

```typescript
    export const foo = 123;
```

åœ¨å…¨å±€å‘½åç©ºé—´é‡Œï¼Œæˆ‘ä»¬ä¸å†æœ‰Â `foo`ï¼Œè¿™å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶Â `bar.ts`Â æ¥è¯æ˜ï¼š

```typescript
    const bar = foo; // ERROR: "cannot find name 'foo'"
```

å¦‚æœä½ æƒ³åœ¨Â `bar.ts`Â é‡Œä½¿ç”¨æ¥è‡ªÂ `foo.ts`Â çš„å†…å®¹ï¼Œä½ å¿…é¡»æ˜¾å¼å¯¼å…¥å®ƒï¼Œæ›´æ–°Â `bar.ts`Â å¦‚ä¸‹æ‰€ç¤ºï¼š

```typescript
    import { foo } from './foo';
    const bar = foo; // allow
```

åœ¨Â `bar.ts`Â æ–‡ä»¶é‡Œä½¿ç”¨Â `import`ï¼Œä¸ä½†å…è®¸ä½ ä½¿ç”¨ä»å…¶ä»–æ–‡ä»¶å¯¼å…¥çš„å†…å®¹ï¼Œè€Œä¸”å®ƒä¼šå°†æ­¤æ–‡ä»¶Â `bar.ts`Â æ ‡è®°ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæ–‡ä»¶å†…å®šä¹‰çš„å£°æ˜ä¹Ÿä¸ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚

## **æ–‡ä»¶æ¨¡å—è¯¦æƒ…**

æ–‡ä»¶æ¨¡å—æ‹¥æœ‰å¼ºå¤§çš„èƒ½åŠ›å’Œå¯ç”¨æ€§ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ¥è®¨è®ºå®ƒçš„èƒ½åŠ›ä»¥åŠä¸€äº›ç”¨æ³•ã€‚

## **æ¾„æ¸…ï¼šcommonjs, amd, es modules, others**

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ¾„æ¸…è¿™äº›æ¨¡å—ç³»ç»Ÿçš„ä¸ä¸€è‡´æ€§ã€‚æˆ‘å°†ä¼šæä¾›ç»™ä½ æˆ‘å½“å‰çš„å»ºè®®ï¼Œä»¥åŠæ¶ˆé™¤ä¸€äº›é¡¾è™‘ã€‚

ä½ å¯ä»¥æ ¹æ®ä¸åŒçš„Â `module`Â é€‰é¡¹æ¥æŠŠ TypeScript ç¼–è¯‘æˆä¸åŒçš„ JavaScript æ¨¡å—ç±»å‹ï¼Œè¿™æœ‰ä¸€äº›ä½ å¯ä»¥å¿½ç•¥çš„ï¼š

- AMDï¼šä¸è¦ä½¿ç”¨å®ƒï¼Œå®ƒä»…èƒ½åœ¨æµè§ˆå™¨å·¥ä½œï¼›
- SystemJSï¼šè¿™æ˜¯ä¸€ä¸ªå¥½çš„å®éªŒï¼Œå·²ç»è¢« ES æ¨¡å—æ›¿ä»£ï¼›
- ES æ¨¡å—ï¼šå®ƒå¹¶æ²¡æœ‰å‡†å¤‡å¥½ã€‚

ä½¿ç”¨Â `module: commonjs`Â é€‰é¡¹æ¥æ›¿ä»£è¿™äº›æ¨¡å¼ï¼Œè¿™ä¼šæ˜¯ä¸€ä¸ªå¥½çš„ä¸»æ„ã€‚

æ€ä¹ˆä¹¦å†™ TypeScript æ¨¡å—ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä»¶è®©äººå›°æƒ‘çš„äº‹ã€‚åœ¨ä»Šå¤©æˆ‘ä»¬åº”è¯¥è¿™ä¹ˆåšï¼š

- `import foo = require('foo')`Â ä¾‹å¦‚ï¼šÂ `import/require`Â ä½¿ç”¨ ES æ¨¡å—è¯­æ³•ã€‚

è¿™å¾ˆé…·ï¼Œæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ ES æ¨¡å—è¯­æ³•ã€‚

**TIP**

ä½¿ç”¨Â `module: commonjs`Â é€‰é¡¹ä»¥åŠä½¿ç”¨ ES æ¨¡å—è¯­æ³•å¯¼å…¥å¯¼å‡ºå…¶ä»–æ¨¡å—ã€‚

## **ES æ¨¡å—è¯­æ³•**

- ä½¿ç”¨Â `export`Â å…³é”®å­—å¯¼å‡ºä¸€ä¸ªå˜é‡ï¼ˆæˆ–è€…ç±»å‹ï¼‰ï¼š

```typescript
    // foo.ts
    export const someVar = 123;
    export type someType = { foo: string;
    };
```

- `export`Â çš„å†™æ³•é™¤äº†ä¸Šé¢è¿™æ ·ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§ï¼š

```typescript
    // foo.ts
    const someVar = 123;
    type someType = { type: string;
    };
    export { someVar, someType };
```

- ä½ ä¹Ÿå¯ä»¥é‡å‘½åå˜é‡å¯¼å‡ºï¼š

```typescript
    // foo.ts
    const someVar = 123;
    export { someVar as aDifferentName };
```

- ä½¿ç”¨Â `import`Â å…³é”®å­—å¯¼å…¥ä¸€ä¸ªå˜é‡æˆ–è€…æ˜¯ä¸€ä¸ªç±»å‹ï¼š

```typescript
    // bar.ts
    import { someVar, someType } from './foo';
```

- é‡å‘½åå¯¼å…¥å˜é‡æˆ–è€…ç±»å‹ï¼š

```typescript
    // bar.ts
    import { someVar as aDifferentName } from './foo';
```

- é™¤äº†æŒ‡å®šåŠ è½½æŸä¸ªè¾“å‡ºå€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•´ä½“åŠ è½½ï¼Œå³ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰è¾“å‡ºå€¼éƒ½åŠ è½½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šé¢ï¼š

```typescript
    // bar.ts
    import * as foo from './foo';
    // ä½ å¯ä»¥ä½¿ç”¨ `foo.someVar` å’Œ `foo.someType` ä»¥åŠå…¶ä»–ä»»ä½•ä» `foo` å¯¼å‡ºçš„å˜é‡æˆ–è€…ç±»å‹
```

- ä»…å¯¼å…¥æ¨¡å—ï¼š

```typescript
    import 'core-js'; // ä¸€ä¸ªæ™®é€šçš„ polyfill åº“
```

- ä»å…¶ä»–æ¨¡å—å¯¼å…¥åæ•´ä½“å¯¼å‡ºï¼š

```typescript
    export * from './foo';
```

- ä»å…¶ä»–æ¨¡å—å¯¼å…¥åï¼Œéƒ¨åˆ†å¯¼å‡ºï¼š

```typescript
    export { someVar } from './foo';
```

- é€šè¿‡é‡å‘½åï¼Œéƒ¨åˆ†å¯¼å‡ºä»å¦ä¸€ä¸ªæ¨¡å—å¯¼å…¥çš„é¡¹ç›®ï¼š

```typescript
    export { someVar as aDifferentName } from './foo';
```

## **é»˜è®¤å¯¼å…¥ï¼å¯¼å‡º**

æˆ‘å¹¶ä¸å–œæ¬¢ç”¨é»˜è®¤å¯¼å‡ºï¼Œè™½ç„¶æœ‰é»˜è®¤å¯¼å‡ºçš„è¯­æ³•ï¼š

- ä½¿ç”¨Â `export default`
    - åœ¨ä¸€ä¸ªå˜é‡ä¹‹å‰ï¼ˆä¸éœ€è¦ä½¿ç”¨Â `let/const/var`ï¼‰ï¼›
    - åœ¨ä¸€ä¸ªå‡½æ•°ä¹‹å‰ï¼›
    - åœ¨ä¸€ä¸ªç±»ä¹‹å‰ã€‚

```typescript
    // some var
    export default (someVar = 123);
    // some function
    export default function someFunction() {}
    // some class
    export default class someClass {}
```

- å¯¼å…¥ä½¿ç”¨Â `import someName from 'someModule'`Â è¯­æ³•ï¼ˆä½ å¯ä»¥æ ¹æ®éœ€è¦ä¸ºå¯¼å…¥å‘½åï¼‰ï¼š

```typescript
    import someLocalNameForThisFile from './foo';
```


## **æ¨¡å—è·¯å¾„**

**TIP**

å‡è®¾ä½ ä½¿ç”¨Â `moduleResolution: node`Â é€‰é¡¹ã€‚è¿™ä¸ªé€‰é¡¹åº”è¯¥åœ¨ä½  TypeScript é…ç½®æ–‡ä»¶é‡Œã€‚å¦‚æœä½ ä½¿ç”¨äº†Â `module: commonjs`Â é€‰é¡¹ï¼ŒÂ `moduleResolution: node`Â å°†ä¼šé»˜è®¤å¼€å¯ã€‚

è¿™é‡Œå­˜åœ¨ä¸¤ç§ä¸åŒæˆªç„¶ä¸åŒçš„æ¨¡å—ï¼Œå®ƒä»¬æ˜¯ç”±å¯¼å…¥è¯­å¥ä¸­çš„ä¸åŒçš„è·¯å¾„å†™æ³•æ‰€å¼•èµ·çš„ï¼ˆä¾‹å¦‚ï¼š`import foo from 'THIS IS THE PATH SECTION'`ï¼‰ã€‚

- ç›¸å¯¹æ¨¡å—è·¯å¾„ï¼ˆè·¯å¾„ä»¥Â `.`Â å¼€å¤´ï¼Œä¾‹å¦‚ï¼š`./someFile`Â æˆ–è€…Â `../../someFolder/someFile`Â ç­‰ï¼‰ï¼›
- å…¶ä»–åŠ¨æ€æŸ¥æ‰¾æ¨¡å—ï¼ˆå¦‚ï¼š`core-js`ï¼Œ`typestyle`ï¼Œ`react`Â æˆ–è€…ç”šè‡³æ˜¯Â `react/core`Â ç­‰ï¼‰ã€‚

å®ƒä»¬çš„ä¸»è¦åŒºåˆ«æ¥è‡ªäºç³»ç»Ÿå¦‚ä½•è§£ææ¨¡å—ã€‚

**TIP**

æˆ‘å°†ä¼šä½¿ç”¨ä¸€ä¸ªæ¦‚å¿µæ€§æœ¯è¯­ï¼Œ`place`Â -- å°†åœ¨æåŠæŸ¥æ‰¾æ¨¡å¼åè§£é‡Šå®ƒã€‚

## **ç›¸å¯¹æ¨¡å—è·¯å¾„**

è¿™å¾ˆç®€å•ï¼Œä»…ä»…æ˜¯æŒ‰ç…§ç›¸å¯¹è·¯å¾„ï¼š

- å¦‚æœæ–‡ä»¶Â `bar.ts`Â ä¸­å«æœ‰Â `import * as foo from './foo'`ï¼Œ`foo`Â æ–‡ä»¶æ‰€å­˜åœ¨çš„åœ°æ–¹å¿…é¡»æ˜¯ç›¸åŒæ–‡ä»¶å¤¹ä¸‹ï¼›
- å¦‚æœæ–‡ä»¶Â `bar.ts`Â ä¸­å«æœ‰Â `import * as foo from '../foo'`ï¼Œ`foo`Â æ–‡ä»¶æ‰€å­˜åœ¨çš„åœ°æ–¹å¿…é¡»æ˜¯ä¸Šä¸€çº§ç›®å½•ï¼›
- å¦‚æœæ–‡ä»¶Â `bar.ts`Â ä¸­å«æœ‰Â `import * as foo from '../someFolder/foo'`ï¼Œ`foo`Â æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹Â `someFolder`Â å¿…é¡»ä¸Â `bar.ts`Â æ‰€åœ¨æ–‡ä»¶å¤¹åœ¨ç›¸åŒçš„ç›®å½•ä¸‹ã€‚

æˆ–è€…ï¼Œä½ è¿˜å¯ä»¥æƒ³æƒ³å…¶ä»–ç›¸å¯¹è·¯å¾„å¯¼å…¥çš„æƒ…æ™¯ã€‚ğŸ˜ƒ

## **åŠ¨æ€æŸ¥æ‰¾**

å½“å¯¼å…¥è·¯å¾„ä¸æ˜¯ç›¸å¯¹è·¯å¾„æ—¶ï¼Œæ¨¡å—è§£æå°†ä¼šæ¨¡ä»¿Â **[Node æ¨¡å—è§£æç­–ç•¥](https://nodejs.org/api/modules.html#modules_all_together)**ï¼Œä»¥ä¸‹æˆ‘å°†ç»™å‡ºä¸€ä¸ªç®€å•ä¾‹å­ï¼š

- å½“ä½ ä½¿ç”¨Â `import * as foo from 'foo'`ï¼Œå°†ä¼šæŒ‰å¦‚ä¸‹é¡ºåºæŸ¥æ‰¾æ¨¡å—ï¼š
    - `./node_modules/foo`
    - `../node_modules/foo`
    - `../../node_modules/foo`
    - ç›´åˆ°ç³»ç»Ÿçš„æ ¹ç›®å½•
- å½“ä½ ä½¿ç”¨Â `import * as foo from 'something/foo'`ï¼Œå°†ä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºæŸ¥æ‰¾å†…å®¹
    - `./node_modules/something/foo`
    - `../node_modules/something/foo`
    - `../../node_modules/something/foo`
    - ç›´åˆ°ç³»ç»Ÿçš„æ ¹ç›®å½•

## **ä»€ä¹ˆæ˜¯Â `place`**

å½“æˆ‘æåŠè¢«æ£€æŸ¥çš„Â `place`Â æ—¶ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ˜¯åœ¨è¿™ä¸ªÂ `place`ï¼ŒTypeScript å°†ä¼šæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼ˆä¾‹å¦‚ä¸€ä¸ªÂ `foo`Â çš„ä½ç½®ï¼‰ï¼š

- å¦‚æœè¿™ä¸ªÂ `place`Â è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ï¼š`foo.ts`ï¼Œæ¬¢å‘¼ï¼
- å¦åˆ™ï¼Œå¦‚æœè¿™ä¸ªÂ `place`Â æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶Â `foo/index.ts`ï¼Œæ¬¢å‘¼ï¼
- å¦åˆ™ï¼Œå¦‚æœè¿™ä¸ªÂ `place`Â æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ªÂ `foo/package.json`Â æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­æŒ‡å®šÂ `types`Â çš„æ–‡ä»¶å­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ¬¢å‘¼ï¼
- å¦åˆ™ï¼Œå¦‚æœè¿™ä¸ªÂ `place`Â æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ªÂ `package.json`Â æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­æŒ‡å®šÂ `main`Â çš„æ–‡ä»¶å­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ¬¢å‘¼ï¼

ä»æ–‡ä»¶ç±»å‹ä¸Šæ¥è¯´ï¼Œæˆ‘å®é™…ä¸Šæ˜¯æŒ‡Â `.ts`ï¼ŒÂ `.d.ts`Â æˆ–è€…Â `.js`

å°±æ˜¯è¿™æ ·ï¼Œç°åœ¨ä½ å·²ç»æ˜¯ä¸€ä¸ªæ¨¡å—æŸ¥æ‰¾ä¸“å®¶ï¼ˆè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå°å°çš„æˆåŠŸï¼‰ã€‚

## **é‡å†™ç±»å‹çš„åŠ¨æ€æŸ¥æ‰¾**

åœ¨ä½ çš„é¡¹ç›®é‡Œï¼Œä½ å¯ä»¥é€šè¿‡Â `declare module 'somePath'`Â æ¥å£°æ˜ä¸€ä¸ªå…¨å±€æ¨¡å—çš„æ–¹å¼ï¼Œç”¨æ¥è§£å†³æŸ¥æ‰¾æ¨¡å—è·¯å¾„çš„é—®é¢˜ï¼š

```typescript
    // globals.d.ts
    declare module 'foo' { // some variable declarations export var bar: number;
    }
```

æ¥ç€ï¼š
```typescript
    // anyOtherTsFileInYourProject.ts
    import * as foo from 'foo';
    // TypeScript å°†å‡è®¾ï¼ˆåœ¨æ²¡æœ‰åšå…¶ä»–æŸ¥æ‰¾çš„æƒ…å†µä¸‹ï¼‰
    // foo æ˜¯ { bar: number }
```

## **`import/require`Â ä»…ä»…æ˜¯å¯¼å…¥ç±»å‹**

ä»¥ä¸‹å¯¼å…¥è¯­æ³•ï¼š
```typescript
    import foo = require('foo');
```

å®ƒå®é™…ä¸Šåªåšäº†ä¸¤ä»¶äº‹ï¼š

- å¯¼å…¥ foo æ¨¡å—çš„æ‰€æœ‰ç±»å‹ä¿¡æ¯ï¼›
- ç¡®å®š foo æ¨¡å—è¿è¡Œæ—¶çš„ä¾èµ–å…³ç³»ã€‚

ä½ å¯ä»¥é€‰æ‹©ä»…åŠ è½½ç±»å‹ä¿¡æ¯ï¼Œè€Œæ²¡æœ‰è¿è¡Œæ—¶çš„ä¾èµ–å…³ç³»ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦é‡æ–°é˜…è¯»æœ¬ä¹¦çš„Â **[å£°æ˜ç©ºé—´éƒ¨åˆ†](https://jkchao.github.io/typescript-book-chinese/project/declarationspaces.html)**Â éƒ¨åˆ†ã€‚

å¦‚æœä½ æ²¡æœ‰æŠŠå¯¼å…¥çš„åç§°å½“åšå˜é‡å£°æ˜ç©ºé—´æ¥ç”¨ï¼Œåœ¨ç¼–è¯‘æˆ JavaScript æ—¶ï¼Œå¯¼å…¥çš„æ¨¡å—å°†ä¼šè¢«å®Œå…¨ç§»é™¤ã€‚è¿™æœ‰ä¸€äº›è¾ƒå¥½çš„ä¾‹å­ï¼Œå½“ä½ äº†è§£äº†å®ƒä»¬ä¹‹åï¼Œæˆ‘ä»¬å°†ä¼šç»™å‡ºä¸€äº›ä½¿ç”¨ä¾‹å­ã€‚

## **ä¾‹å­ 1**
```typescript
    import foo = require('foo');
```

å°†ä¼šç¼–è¯‘æˆ JavaScriptï¼š

è¿™æ˜¯æ­£ç¡®çš„ï¼Œä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ç©ºæ–‡ä»¶ã€‚

## **ä¾‹å­ 2**
```typescript
    import foo = require('foo');
    var bar: foo;
```

å°†ä¼šè¢«ç¼–è¯‘æˆï¼š
```typescript
    let bar;
```

è¿™æ˜¯å› ä¸º foo ï¼ˆæˆ–è€…å…¶ä»–ä»»ä½•å±æ€§å¦‚ï¼š`foo.bas`ï¼‰æ²¡æœ‰è¢«å½“åšä¸€ä¸ªå˜é‡ä½¿ç”¨ã€‚

## **ä¾‹å­ 3**
```typescript
    import foo = require('foo');
    const bar = foo;
```

å°†ä¼šè¢«ç¼–è¯‘æˆï¼ˆå‡è®¾æ˜¯ commonjsï¼‰ï¼š
```typescript
    const foo = require('foo');
    const bar = foo;
```

è¿™æ˜¯å› ä¸ºÂ `foo`Â è¢«å½“åšå˜é‡ä½¿ç”¨äº†ã€‚

## **ä½¿ç”¨ä¾‹å­ï¼šæ‡’åŠ è½½**

ç±»å‹æ¨æ–­éœ€è¦æå‰å®Œæˆï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æƒ³åœ¨Â `bar`Â æ–‡ä»¶é‡Œï¼Œä½¿ç”¨ä»å…¶ä»–æ–‡ä»¶Â `foo`Â å¯¼å‡ºçš„ç±»å‹ï¼Œä½ å°†ä¸å¾—ä¸è¿™ä¹ˆåšï¼š
```typescript
    import foo = require('foo');
    let bar: foo.SomeType;
```

ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…æ™¯ä¸‹ï¼Œä½ åªæƒ³åœ¨éœ€è¦æ—¶åŠ è½½æ¨¡å—Â `foo`ï¼Œæ­¤æ—¶ä½ éœ€è¦ä»…åœ¨ç±»å‹æ³¨è§£ä¸­ä½¿ç”¨å¯¼å…¥çš„æ¨¡å—åç§°ï¼Œè€Œä¸æ˜¯åœ¨å˜é‡ä¸­ä½¿ç”¨ã€‚åœ¨ç¼–è¯‘æˆ JavaScript å¼ï¼Œè¿™äº›å°†ä¼šè¢«ç§»é™¤ã€‚æ¥ç€ï¼Œä½ å¯ä»¥æ‰‹åŠ¨å¯¼å…¥ä½ éœ€è¦çš„æ¨¡å—ã€‚

åšä¸ºä¸€ä¸ªä¾‹å­ï¼Œè€ƒè™‘ä»¥ä¸‹åŸºäºÂ `commonjs`Â çš„ä»£ç ï¼Œæˆ‘ä»¬ä»…åœ¨ä¸€ä¸ªå‡½æ•°å†…å¯¼å…¥Â `foo`Â æ¨¡å—ï¼š
```typescript
    import foo = require('foo');
    export function loadFoo() { // è¿™æ˜¯æ‡’åŠ è½½ fooï¼ŒåŸå§‹çš„åŠ è½½ä»…ä»…ç”¨æ¥åšç±»å‹æ³¨è§£ const _foo: typeof foo = require('foo'); // ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ `_foo` æ›¿ä»£ `foo` æ¥åšä¸ºä¸€ä¸ªå˜é‡ä½¿ç”¨
    }
```

ä¸€ä¸ªåŒæ ·ç®€å•çš„Â `amd`Â æ¨¡å—ï¼ˆä½¿ç”¨ requirejsï¼‰ï¼š
```typescript
    import foo = require('foo');
    export function loadFoo() { // è¿™æ˜¯æ‡’åŠ è½½ fooï¼ŒåŸå§‹çš„åŠ è½½ä»…ä»…ç”¨æ¥åšç±»å‹æ³¨è§£ require(['foo'], (_foo: typeof foo) => { // ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ `_foo` æ›¿ä»£ `foo` æ¥åšä¸ºä¸€ä¸ªå˜é‡ä½¿ç”¨ });
    }
```

è¿™äº›é€šå¸¸åœ¨ä»¥ä¸‹æƒ…æ™¯ä½¿ç”¨ï¼š

- åœ¨ web app é‡Œï¼Œ å½“ä½ åœ¨ç‰¹å®šè·¯ç”±ä¸ŠåŠ è½½ JavaScript æ—¶ï¼›
- åœ¨ node åº”ç”¨é‡Œï¼Œå½“ä½ åªæƒ³åŠ è½½ç‰¹å®šæ¨¡å—ï¼Œç”¨æ¥åŠ å¿«å¯åŠ¨é€Ÿåº¦æ—¶ã€‚

## **ä½¿ç”¨ä¾‹å­ï¼šæ‰“ç ´å¾ªç¯ä¾èµ–**

ç±»ä¼¼äºæ‡’åŠ è½½çš„ä½¿ç”¨ç”¨ä¾‹ï¼ŒæŸäº›æ¨¡å—åŠ è½½å™¨ï¼ˆcommonjs/node å’Œ amd/requirejsï¼‰ä¸èƒ½å¾ˆå¥½çš„å¤„ç†å¾ªç¯ä¾èµ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€æ–¹é¢æˆ‘ä»¬ä½¿ç”¨å»¶è¿ŸåŠ è½½ä»£ç ï¼Œå¹¶åœ¨å¦ä¸€æ–¹é¢é¢„å…ˆåŠ è½½æ¨¡å—æ—¶å¾ˆå®ç”¨çš„ã€‚

## **ä½¿ç”¨ä¾‹å­ï¼šç¡®ä¿å¯¼å…¥**

å½“ä½ åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œåªæ˜¯æƒ³å¼•å…¥å…¶é™„åŠ çš„ä½œç”¨ï¼ˆå¦‚ï¼šæ¨¡å—å¯èƒ½ä¼šæ³¨å†Œä¸€äº›åƒÂ **[CodeMirror addons](https://codemirror.net/doc/manual.html#addons)**ï¼‰æ—¶ï¼Œç„¶è€Œï¼Œå¦‚æœä½ ä»…ä»…æ˜¯Â `import/require`Â ï¼ˆå¯¼å…¥ï¼‰ä¸€äº›å¹¶æ²¡æœ‰ä¸ä½ çš„æ¨¡å—æˆ–è€…æ¨¡å—åŠ è½½å™¨æœ‰ä»»ä½•ä¾èµ–çš„ JavaScript ä»£ç ï¼Œï¼ˆå¦‚ï¼šwebpackï¼‰ï¼Œç»è¿‡ TypeScript ç¼–è¯‘åï¼Œè¿™äº›å°†ä¼šè¢«å®Œå…¨å¿½è§†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªÂ `ensureImport`Â å˜é‡ï¼Œæ¥ç¡®ä¿ç¼–è¯‘çš„ JavaScript ä¾èµ–ä¸æ¨¡å—ã€‚å¦‚ï¼š
```typescript
    import foo = require('./foo');
    import bar = require('./bar');
    import bas = require('./bas');
    const ensureImport: any = foo || bar || bas;
```

## **globals.d.ts**

åœ¨ä¸Šæ–‡ä¸­ï¼Œå½“æˆ‘ä»¬è®¨è®ºæ–‡ä»¶æ¨¡å—æ—¶ï¼Œæ¯”è¾ƒäº†å…¨å±€å˜é‡ä¸æ–‡ä»¶æ¨¡å—ï¼Œå¹¶ä¸”æˆ‘ä»¬æ¨èä½¿ç”¨åŸºäºæ–‡ä»¶çš„æ¨¡å—ï¼Œè€Œä¸æ˜¯é€‰æ‹©æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚

ç„¶è€Œï¼Œå¦‚æœä½ çš„å›¢é˜Ÿé‡Œæœ‰ TypeScript åˆå­¦è€…ï¼Œä½ å¯ä»¥æä¾›ä»–ä»¬ä¸€ä¸ªÂ `globals.d.ts`Â æ–‡ä»¶ï¼Œç”¨æ¥å°†ä¸€äº›æ¥å£æˆ–è€…ç±»å‹æ”¾å…¥å…¨å±€å‘½åç©ºé—´é‡Œï¼Œè¿™äº›å®šä¹‰çš„æ¥å£å’Œç±»å‹èƒ½åœ¨ä½ çš„æ‰€æœ‰ TypeScript ä»£ç é‡Œä½¿ç”¨ã€‚

**TIP**

å¯¹äºä»»ä½•éœ€è¦ç¼–è¯‘æˆ JavaScript ä»£ç ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ æ”¾å…¥æ–‡ä»¶æ¨¡å—é‡Œã€‚

- `globals.d.ts`Â æ˜¯ä¸€ç§æ‰©å……Â `lib.d.ts`Â å¾ˆå¥½çš„æ–¹å¼ï¼Œå¦‚æœä½ éœ€è¦ã€‚
- å½“ä½ ä»Â `TS`Â è¿ç§»åˆ°Â `JS`Â æ—¶ï¼Œå®šä¹‰Â `declare module "some-library-you-dont-care-to-get-defs-for"`Â èƒ½è®©ä½ å¿«é€Ÿå¼€å§‹ã€‚

>>> è½¬è‡ª https://jkchao.github.io/typescript-book-chinese/project/modules.html
